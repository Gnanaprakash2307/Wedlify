<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wedlify MVP (Vanilla)</title>
  <style>
    :root {
      --accent:#6c5ce7; /* primary */
      --accent-2:#00d2d3; /* teal */
      --accent-3:#ff7675; /* coral */
      --bg:#0f1226; /* deep space */
      --fg:#eaeaf7; /* light text */
      --muted:#b5b7d3;
      --border:#262a4d;
      --surface:#161a36;
      --surface-2:#1e2348;
      --shadow: 0 6px 30px rgba(0,0,0,0.25);
    }
    * { box-sizing:border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:radial-gradient(1200px 600px at 10% -10%, rgba(108,92,231,.25), transparent), radial-gradient(1200px 600px at 90% -10%, rgba(0,210,211,.25), transparent), var(--bg); color:var(--fg); }
    nav { display:flex; gap:16px; padding:12px 16px; border-bottom:1px solid var(--border); position:sticky; top:0; background:linear-gradient(90deg, rgba(22,26,54,.9), rgba(30,35,72,.9)); backdrop-filter: blur(6px); }
    nav a { text-decoration:none; color:var(--fg); padding:6px 10px; border-radius:8px; transition: all .2s ease; }
    nav a.active, nav a:hover { background:rgba(255,255,255,0.06); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08); }
    .spacer { margin-left:auto; }
    main { padding:24px; max-width:1100px; margin:0 auto; }
    h1, h2, h3 { margin:8px 0; }
    .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:14px; }
    .card { border:1px solid var(--border); background:linear-gradient(180deg, var(--surface), var(--surface-2)); border-radius:14px; padding:14px; box-shadow: var(--shadow); }
    .btn { background:linear-gradient(135deg, var(--accent), #8e79ff); color:#fff; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; transition: transform .08s ease, filter .2s ease; }
    .btn:hover { filter: brightness(1.05); }
    .btn:active { transform: translateY(1px); }
    .btn.alt { background:linear-gradient(135deg, var(--accent-2), #38f2f3); }
    .btn.ghost { background:transparent; color:#fff; border:1px solid rgba(255,255,255,.2); }
    .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    input, select { padding:10px 12px; border:1px solid var(--border); background: var(--surface); color: var(--fg); border-radius:10px; width:100%; }
    form { display:grid; gap:8px; }
    .muted { color:var(--muted); font-size:12px; }
    .hidden { display:none; }
    .pill { display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid var(--border); background: rgba(255,255,255,.04); font-size:12px; margin-right:6px; }
    .section { display:none; }
    .section.active { display:block; }
    footer { text-align:center; padding:32px 16px; color:#888; }
  </style>
  <script>
    // In-memory seed data (persisted to localStorage once)
    const seed = {
      servers: [
        { id: 'srv_1', name: 'Aisha Khan', location: 'Chennai', availability: ['Fri','Sat','Sun'], hourlyRate: 250, verified: true, rating: 4.7 },
        { id: 'srv_2', name: 'Vikram Rao', location: 'Madurai', availability: ['Sat','Sun'], hourlyRate: 200, verified: true, rating: 4.4 },
        { id: 'srv_3', name: 'Nalini Iyer', location: 'Coimbatore', availability: ['Thu','Fri'], hourlyRate: 220, verified: false, rating: 4.0 },
      ],
      venues: [
        { id: 'ven_1', name: 'Royal Mahal', location: 'Chennai', capacity: 500, pricePerDay: 120000, photos: [], description: 'Grand hall with modern amenities', rating: 4.5 },
        { id: 'ven_2', name: 'Lotus Palace', location: 'Trichy', capacity: 300, pricePerDay: 80000, photos: [], description: 'Elegant venue with garden', rating: 4.3 },
      ],
      chefs: [
        { id: 'chef_1', name: 'Chef Arjun', cuisine: 'South Indian', location: 'Chennai', packages: [
          { name: 'Classic', pricePerPerson: 350, items: ['Idli', 'Vada', 'Sambar', 'Chutneys'] },
          { name: 'Grand', pricePerPerson: 550, items: ['Meals', 'Payasam', 'Poriyal', 'Kootu'] },
        ], rating: 4.6 },
        { id: 'chef_2', name: 'Chef Meera', cuisine: 'Multi-cuisine', location: 'Madurai', packages: [
          { name: 'Silver', pricePerPerson: 450, items: ['Paneer Tikka', 'Fried Rice', 'Naan'] },
        ], rating: 4.4 },
      ],
    };

    const storage = {
      get(key, fallback) { try { return JSON.parse(localStorage.getItem(key)) ?? fallback; } catch { return fallback; } },
      set(key, value) { localStorage.setItem(key, JSON.stringify(value)); },
    };

    function ensureSeed() {
      if (!storage.get('wedlify_seeded', false)) {
        storage.set('servers', seed.servers);
        storage.set('venues', seed.venues);
        storage.set('chefs', seed.chefs);
        storage.set('bookings', []);
        storage.set('users', [
          { id:'u_admin', name:'Admin', email:'admin@wedlify.test', password:'admin', role:'admin' },
        ]);
        storage.set('wedlify_seeded', true);
      }
    }

    // Simple auth
    function currentUser() { return storage.get('current_user', null); }
    function login(email, password) {
      const users = storage.get('users', []);
      const found = users.find(u => u.email === email && u.password === password);
      if (found) { storage.set('current_user', found); return { ok:true, user:found }; }
      return { ok:false, message:'Invalid credentials' };
    }
    function register(name, email, password, role) {
      const users = storage.get('users', []);
      if (users.some(u => u.email === email)) return { ok:false, message:'Email already used' };
      const user = { id: 'u_'+Date.now(), name, email, password, role };
      users.push(user); storage.set('users', users); storage.set('current_user', user);
      return { ok:true, user };
    }
    function logout() { localStorage.removeItem('current_user'); }

    // Booking
    function createBooking({ serviceType, serviceRef, date, time, quantity, amount }) {
      const user = currentUser();
      if (!user || user.role !== 'organizer') return { ok:false, message:'Organizer login required' };
      const bookings = storage.get('bookings', []);
      const booking = {
        id: 'b_'+Date.now(), organizer: user.id, serviceType, serviceRef, date, time,
        quantity: Number(quantity||1), amount: Number(amount||0), status:'confirmed', paymentStatus:'paid', createdAt: new Date().toISOString()
      };
      bookings.push(booking); storage.set('bookings', bookings);
      return { ok:true, booking };
    }
    function myBookings() {
      const user = currentUser(); if (!user) return [];
      const all = storage.get('bookings', []);
      return all.filter(b => b.organizer === user.id).sort((a,b)=> b.createdAt.localeCompare(a.createdAt));
    }

    // UI helpers
    function setActive(sectionId) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
      document.querySelectorAll('nav a[data-section]').forEach(a => a.classList.toggle('active', a.dataset.section === sectionId));
    }
    function $(sel) { return document.querySelector(sel); }

    function renderServers() {
      const list = storage.get('servers', []);
      const qLoc = $('#srv_location').value.trim().toLowerCase();
      const qAvail = $('#srv_availability').value.trim().toLowerCase();
      const filtered = list.filter(s => (
        (!qLoc || s.location.toLowerCase().includes(qLoc)) &&
        (!qAvail || s.availability.map(a=>a.toLowerCase()).some(a => a.includes(qAvail))) &&
        s.verified
      ));
      const container = $('#servers_list');
      container.innerHTML = filtered.map(s => `
        <div class="card">
          <div class="row" style="justify-content:space-between">
            <strong>${s.name}</strong>
            <span class="pill">${s.location}</span>
          </div>
          <div class="muted">${s.availability.join(', ')}</div>
          <div style="margin:6px 0">₹${s.hourlyRate}/hr • ⭐ ${s.rating}</div>
          <button class="btn" onclick="openBook('server','${s.id}')">Book</button>
        </div>
      `).join('');
    }

    function renderVenues() {
      const list = storage.get('venues', []);
      const container = $('#venues_list');
      container.innerHTML = list.map(v => `
        <div class="card">
          <h3>${v.name}</h3>
          <div class="muted">${v.location}</div>
          <div>Capacity: ${v.capacity}</div>
          <div>₹${v.pricePerDay}/day</div>
          <button class="btn" onclick="openBook('venue','${v.id}')">Book</button>
        </div>
      `).join('');
    }

    function renderChefs() {
      const list = storage.get('chefs', []);
      const container = $('#chefs_list');
      container.innerHTML = list.map(c => `
        <div class="card">
          <h3>${c.name}</h3>
          <div class="muted">${c.cuisine} • ${c.location}</div>
          <div style="margin:6px 0">⭐ ${c.rating}</div>
          ${(c.packages||[]).map(p => `
            <div class="row" style="justify-content:space-between;border:1px solid var(--border);border-radius:8px;padding:6px 8px;margin:6px 0">
              <div>${p.name} — ₹${p.pricePerPerson}/person</div>
              <small class="muted">${(p.items||[]).join(', ')}</small>
            </div>
          `).join('')}
          <button class="btn" onclick="openBook('chef','${c.id}')">Book</button>
        </div>
      `).join('');
    }

    

    function openBook(type, id) {
      setActive('book');
      $('#bk_type').value = type;
      $('#bk_ref').value = id || '';
    }

    function handleLogin(e) {
      e.preventDefault();
      const email = $('#lg_email').value.trim();
      const password = $('#lg_password').value;
      const res = login(email, password);
      if (!res.ok) return alert(res.message);
      alert('Logged in');
      renderDashboard();
    }
    function handleRegister(e) {
      e.preventDefault();
      const name = $('#rg_name').value.trim();
      const email = $('#rg_email').value.trim();
      const password = $('#rg_password').value;
      const role = $('#rg_role').value;
      const res = register(name, email, password, role);
      if (!res.ok) return alert(res.message);
      alert('Account created & logged in');
      renderDashboard();
    }
    function handleLogout() { logout(); renderDashboard(); }

    function handleBooking(e) {
      e.preventDefault();
      const payload = {
        serviceType: $('#bk_type').value,
        serviceRef: $('#bk_ref').value.trim(),
        date: $('#bk_date').value.trim(),
        time: $('#bk_time').value.trim(),
        quantity: $('#bk_qty').value,
        amount: $('#bk_amt').value,
      };
      if (!payload.serviceType || !payload.serviceRef || !payload.date || !payload.time) {
        return alert('Please fill required fields');
      }
      const res = createBooking(payload);
      if (!res.ok) return alert(res.message);
      alert('Booking confirmed');
      setActive('home');
    }

    window.addEventListener('DOMContentLoaded', () => {
      ensureSeed();
      renderServers();
      renderVenues();
      renderChefs();
      setActive('home');
    });
  </script>
</head>
<body>
  <nav>
    <a href="#" data-section="home" onclick="setActive('home')">Wedlify</a>
    <a href="#" data-section="servers" onclick="setActive('servers')">Servers</a>
    <a href="#" data-section="venues" onclick="setActive('venues')">Venues</a>
    <a href="#" data-section="chefs" onclick="setActive('chefs')">Chefs</a>
    <a href="#" data-section="book" onclick="setActive('book')">Book</a>
    <span class="spacer"></span>
    <a href="index.html" title="Login / Register">Login</a>
  </nav>

  <main>
    <section id="home" class="section active">
      <h1>Wedlify</h1>
      <p class="muted">Connect organizers with verified students, venues, and chefs.</p>
      <div class="grid">
        <div class="card"><h3>Servers</h3><p>Find verified student servers by availability and location.</p></div>
        <div class="card"><h3>Venues</h3><p>Browse Mahals, see capacity, price and details.</p></div>
        <div class="card"><h3>Chefs</h3><p>Compare menus and catering packages.</p></div>
        <div class="card"><h3>Bookings</h3><p>Create and track bookings in your dashboard.</p></div>
      </div>
    </section>

    <section id="servers" class="section">
      <h2>Student Servers</h2>
      <div class="row" style="margin:8px 0">
        <input id="srv_location" placeholder="Filter by location" oninput="renderServers()" />
        <input id="srv_availability" placeholder="Filter by day (e.g. Sat)" oninput="renderServers()" />
      </div>
      <div id="servers_list" class="grid"></div>
    </section>

    <section id="venues" class="section">
      <h2>Venues</h2>
      <div id="venues_list" class="grid"></div>
    </section>

    <section id="chefs" class="section">
      <h2>Chefs / Catering</h2>
      <div id="chefs_list" class="grid"></div>
    </section>

    <section id="book" class="section">
      <h2>Book a Service</h2>
      <p class="muted">Login as organizer to confirm booking.</p>
      <form onsubmit="handleBooking(event)" style="max-width:420px">
        <select id="bk_type">
          <option value="server">Server</option>
          <option value="venue" selected>Venue</option>
          <option value="chef">Chef</option>
        </select>
        <input id="bk_ref" placeholder="Service ID (e.g., ven_1)" />
        <div class="row">
          <input id="bk_date" placeholder="Date (YYYY-MM-DD)" />
          <input id="bk_time" placeholder="Time (e.g., 10:00)" />
        </div>
        <div class="row">
          <input id="bk_qty" type="number" min="1" value="1" placeholder="Quantity" />
          <input id="bk_amt" type="number" min="0" value="0" placeholder="Amount" />
        </div>
        <button class="btn" type="submit">Confirm Booking</button>
      </form>
    </section>

    
  </main>

  <footer>
    Craft the moments that matter. Every great celebration starts with a simple plan.
  </footer>
</body>
</html>


